<md-dialog aria-label='Edit utility functions' class="sin-function-dialog">
    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2>Edit utility functions</h2> 
            <span flex="" class="flex"></span>
            
            <md-switch ng-model="switchShowPublic" ng-change="ufListUpdate()" ng-hide="switchShowAll">
            {{switchShowPublicText}}
            </md-switch>
            <md-switch ng-model="switchShowAll" ng-change="ufListUpdate()">
            Show all
            </md-switch>
            
        </div>
    </md-toolbar>
    <md-dialog-content layout="row" class="sin-dark-background-fix">
        <div class="content-stuff utility-functions" layout="column" flex="33">
            <md-content class="sin-functions-list" layout="column" flex md-scroll-y>
                <md-button ng-click="setSelectedUtilityFunction(function)" ng-repeat="function in ufListToShow" ng-disabled="function.id == selectedUtilityFunction.id">{{function.name}}
                    <md-button class="button-tight" aria-label="Delete this function" ng-click="deleteUtilityFunction(function.id)">
                        <i class="fa fa-minus-circle"></i>
                        <md-tooltip>Delete this function</md-tooltip>
                    </md-button>
                    <span ng-if="function.nameWarning">
                        <i class="fa fa-warning"></i>
                        <md-tooltip>A function already exists with the same name</md-tooltip>
                    </span>
                </md-button>
                <span flex></span>
            </md-content>
            <md-toolbar class="md-actions" layout = "row" layout-align="left">
                <md-button aria-label="Create new function" ng-click="createNewUtilityFunction()">
                    <i class="fa fa-plus"></i>
                </md-button>
                <md-button aria-label="Create new text transformation" ng-click="createNewTextTransformation()">
                    <i class="fa fa-font"></i>
                </md-button>
            </md-toolbar>
        </div>
        <div flex layout="column">
                <div class="code-mirror-container" flex style="font-size:1.1em;">
                    <ui-codemirror ng-model="selectedUtilityFunction.configuration.clojure" ui-codemirror-opts="codemirrorOpts" ng-keydown="markAsChanged()"></ui-codemirror>
                </div>
            <md-toolbar class="md-actions" layout="row" layout-align="right">
                <md-switch ng-model="switchSelectedIsPublic" ng-hide="hideSwitchSelectedIsPublic" ng-change="markAsChanged()">Public utility function</md-switch>
                <md-button ng-click="applyUtilityFunctionChanges()" aria-label="Apply custom function changes">Done</md-button>
                <md-button ng-click="cancelUtilityFunctionChanges()"  aria-label="Cancel changes to custom functions">Cancel</md-button>
            </md-toolbar>
        </div>
    </md-dialog-content>
</md-dialog>
